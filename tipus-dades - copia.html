<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="ca">
<!--<![endif]-->
<head>
	<meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="css/stylesheet.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="css/pygment_trac.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="css/print.css" media="print" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
	<title>Instal·lació- tutorial d3.js en català</title>
</head>
<body>

  <div id="container">
    <div class="inner">
      <header>
        <div>    

        <a href="https://joanprimpratrec2.github.io/index.html">Inici  |  </a>
        <a href="https://joanprimpratrec2.github.io/fonaments.html">Fonaments |  </a>
        <a href="https://joanprimpratrec2.github.io/instalacio.html">Instal·lació | </a>
        <a href="https://joanprimpratrec2.github.io/afegir-elements.html">Afegir Elements | </a>
        <a href="https://joanprimpratrec2.github.io/encadenar-metodes.html">Encadenar Mètodes | </a>
        <a href="https://joanprimpratrec2.github.io/asociar-dades.html">Asociar Dades | </a>
        <a href="https://joanprimpratrec2.github.io/fent-servir-les-dades.html">Fent servir les Dades | </a>
        <a href="https://joanprimpratrec2.github.io/desplegar-divs.html">Desplegar els divs | </a>
        <a href="https://joanprimpratrec2.github.io/funcio-data.html">La funció data() | </a>
        <a href="https://joanprimpratrec2.github.io/primer-svg.html">El primer SVG | </a>
        <a href="https://joanprimpratrec2.github.io/dibuixant-svgs.html">Dibuixant SVG's | </a>
        <a href="https://joanprimpratrec2.github.io/tipus-dades.html">Tipus de dades | </a>
        <a href="https://joanprimpratrec2.github.io/fent-diagrama-barres.html">Fent un diagrama de barres | </a>
        
                  	
        
        </div>
      </header>

      <hr>
      <section id="main_content">
        <h2 id="afegir-elements">Tipus de Dades</h2>

        <p class="timestamp">última actualització 30 de Desembre de 2012</p>
        <p class="timestamp">traducció 27 de Maig de 2015</p>

        <p>D3 és extremadament flexible sobre el tipus de dades que accepta. Aquest capítol fa una introducció a les estructures de dades que es fan servir més amb JavaScript i D3.</p>

        <h2>Variables</h2>

        <p>Una variable és un conjunt de dades, el bloc més petit que és pot anomenar conjunt de dades. Les variables són els fonaments de totes les altres estructures de dades, que senzillament són altres tipus de configuració de les mateixes variables.</p>

        <p>Si ets nou a JavaScript, has de saber que es un llenguatge de tipus <em>loosely typed</em> , que vol dir que no fa falta que especifiques quin <em>type</em> (tipus) d'informació guardarà la variable previament a fer-la servir. Molts altres llenguatges, com Java (que és completament diferent de Java<em>Script</em>!), requereix que defineix el tipus de dada que contindrà la variable quan la defineixes, com ara <code>int</code>, <code>float</code>, <code>boolean</code>, or <code>String</code>.</p>

        <pre>
          <code>
            //Declarant variables a Java
            int number = 5;
            float value = 12.3467;
            boolean active = true;
            String text = "Crystal clear";
          </code>
        </pre>

        <p>JavaScript, en canvi, defineix automaticament el <em>types</em> a la variable en funció del tipus de informació que se li assigna. (Fixat que <code>''</code> or <code>""</code> indica un valor de cadena. Prefereixo les dobles cometes <code>""</code>, però a algunes persones els hi agrada més les simples <code>''</code>.)</p>

        <pre>
          <code>
            //Declarant una variable a JavaScript
            var number = 5;
            var value = 12.3467;
            var active = true;
            var text = "Crystal clear";
          </code>
        </pre>

        <p>Quin avorriment — <code>var</code>, <code>var</code>, <code>var</code>, <code>var</code>! — pero molt útil. Podem declarar i posar nom a variables abans de saber quin tipus de dades contindran. Fins i tot pots canviar el tipus de dada de la variable en temps real sense que JavaScript embogeixi.</p>

        <pre><code>var value = 100;
        value = 99.9999;
        value = false;
        value = "This can't possibly work.";
        value = "Argh, it does work! No errorzzzz!";
        </code></pre>

        <h2>Matrius</h2>

        <p>Una matriu ("array en anglès") és una seqüència de valors, convenientment guardats en una sola variable.</p>

        <p>Fer un seguiment de valors relacionats en variables separades és totalment ineficient:</p>

        <pre>
          <code>
            var numberA = 5;
            var numberB = 10;
            var numberC = 15;
            var numberD = 20;
            var numberE = 25;
          </code>
        </pre>

        <p>Reescriure-ho com una matriu és molt més senzill. Claudàtors <code>[]</code> indiquen que és una matriu, mentre que per separar els valors de la matriu es fa servir la coma:</p>

        <pre>
          <code>
            var numbers = [ 5, 10, 15, 20, 25 ];
          </code>
        </pre>

        <p>Arrays are ubiquitous in data visualization, so you should become very comfortable with them. You can access (retrieve) a value in an array by using bracket notation:</p>

        <pre>
          <code>
            numbers[2]  //Retorna el valor 15
          </code>
        </pre>

        <p>El nombre dins dels claudàtors es refereix a la posició del valor dins la matriu. Recorda, les posicions de la matriu es comencen a comptar des de zero, així que la primera posició és <code>0</code>, la segona es <code>1</code>, i així succesivament.</p>

        <pre>
          <code>
            numbers[0]  //Retorna 5
            numbers[1]  //Retorna 10
            numbers[2]  //Retorna 15
            numbers[3]  //Retorna 20
            numbers[4]  //Retorna 25
          </code>
        </pre>

        <p>Algunes persones troben útil pensar en les matrius com  si fos una taula amb files i columnes:</p>

        <pre>
          <code> 
            ID | Value
            ------------
             0  |  5
             1  |  10
             2  |  15
             3  |  20
             4  |  25
          </code>
        </pre>

        <p>Les matrius poden tenir qualsevol tipus de dada, no només nombres sencers.</p>

        <pre>
          <code>
            var percentages = [ 0.55, 0.32, 0.91 ];
            var names = [ "Ernie", "Bert", "Oscar" ];

            percentages[1]  //Returns 0.32
            names[1]        //Returns "Bert"
          </code>
        </pre>

        <h2>Com actuen les matrius amb el for()</h2>

        <p>La visualització de dades basada en codi no seria possible sense les matrius i la poderoa instrucció de bucles <code>for()</code>. Juntes, formen el duo dinàmic friki de les dades. (Si no et consideres un "friki de les dades", et recordeo que estàs llegint el capítol titolat "tipus de dades").</p>

        <p>Una matriu organitza grans quantitats de dades en el lloc que els hi correspon. Així la instrucció <code>for()</code> pot fer un bucle i aplicar alguna acció per cadascun d'ells de manera ràpida i efectiva  — com ara, expressar el seu valor d'una forma visual. D3 sovint gestiona aquest bucle per nosaltres, amb el seu mètode màgic <code>data()</code>, però és important ser capaç de construir els teus propis bucles.</p>

        <p>No entraré en els mecanismes del codi <code>for()</code> aquí; això donaria per un altre tutorial sencer. Pero fixa't amb aquest exemple, que fa un bucle sobre els valors <code>numbers</code> d'abans.</p>

        <pre>
          <code>
            for (var i = 0; i &lt; numbers.length; i++) {
                console.log(numbers[i]);  //Escriu el valor a la consola
            }
          </code>
        </pre>

        <p>Veus la part <code>numbers.length</code>?  Aquesta es la part maca. Si <code>numbers</code> te 10 posicions de llargada, el bucle es repetirà 10 vegades. Si en té 10 milions… doncs si, es repetirà 10 milions . Això és el que els ordinador saben fer millor: agafar un conjunt de instruccions i executar-les  una i altra vegada. I això és precisament la causa de perque la visualització de dades és tan agraida — tu dissenyes i codifiques un sistema de visualització, i el sistema et respon de la manera que esperes independenment del tipus de dades. El sistema de regles de representació és consistent encara que les dades no ho siguin.</p>

        <h2>Objectes</h2>

        <p>Les matrius son adequades per assignar simples llistes de valors, però si les dades són més complexes llavors és millor fer servir els objectes.</p> 

        <p>Pel que ens ocupa, pensa en els objectes de JavaScript com una estructura de dades personalitzada.</p> 

        <p>Fem servir claus <code>{}</code> per definir un objecte. Dins les claus incluim <em>indexs</em> i <em>valors</em>. Els dos punts <code>:</code> separen cada index del seu valor, i una coma separa cada parella index/valor.</p>

        <pre>
          <code>
            var fruit = {
              kind: "grape",
              color: "red",
              quantity: 12,
              tasty: true
              };
          </code>
        </pre>

        <p>Per fer referència a cada valor, podem fer servir la <em>notació amb punt</em> , especificant el nom de l'index:</p>

        <pre>
          <code>
            fruit.kind      //Retorna "grape"
            fruit.color     //Retorna "red"
            fruit.quantity  //Retorna 12
            fruit.tasty     //Retorna true
          </code>
        </pre>

        <p>Pensa en el valor com una "propietat" de l'objecte. Oh, mira, fruita. “Quin tipus de fruita ést?” et pots preguntar. Doncs resulta que, <code>fruit.kind</code> es <code>"grape"</code>. “Es saborosa?” Oh, i tant, perque <code>fruit.tasty</code> és <code>true</code>.</p>

        <h2>Objectes + Matrius<h2>

        <p>Pots combinar aquestes dues estructures per crear una matriu d'objectes, o objectes de matrius, o objectes d'objectes, o, bé, básicament qualsevol estructura que doni sentit a les teves dades.</p>

        <p>Digue'm que hem comprat un parell més de peces de fruita, i volem incorporar-les al nostre catàleg. Hem fet servir claudàtors <code>[]</code> a la part exterior, que indiquen que és una matriu, seguida de claus <code>{}</code>, i la notració del tipus objecte al seu interior, amb cada objecte separat per comes.</p>

        <pre>
          <code>
            var fruits = [
                {
                    kind: "grape",
                    color: "red",
                    quantity: 12,
                    tasty: true
                },
                {
                    kind: "kiwi",
                    color: "brown",
                    quantity: 98,
                    tasty: true
                },
                {
                    kind: "banana",
                    color: "yellow",
                    quantity: 0,
                    tasty: true
                }
            ];
            </code>
          </pre>

        <p>Per accedidr a aquestes dades, només hem de seguir el camí dels índex fins al valor que volem. Recorda, <code>[]</code> vol dir matrius, i <code>{}</code> vol dir objecte. <code>fruits</code> és una matriu, així que farem servir la notació amb claudàtors per expecificar que es l'índex de una matriu:</p>

        <pre>
          <code>
            fruits[1]
          </code>
        </pre>

        <p>Seguim!. Cada element de la matriu és un objecte, per tant només cal un punt i un índex de l'objecte:</p>

        <pre>
          <code>
            fruits[1].quantity  //Retorna 98
          </code>
        </pre>

        <p>Aquí tens el mapa de com accedir a cadascún dels valors de la matriu d'objectes <code>fruits</code>:</p>

        <pre>
          <code>
            fruits[0].kind      ==  "grape"
            fruits[0].color     ==  "red"
            fruits[0].quantity  ==  12
            fruits[0].tasty     ==  true

            fruits[1].kind      ==  "kiwi"
            fruits[1].color     ==  "brown"
            fruits[1].quantity  ==  98
            fruits[1].tasty     ==  true

            fruits[2].kind      ==  "banana"
            fruits[2].color     ==  "yellow"
            fruits[2].quantity  ==  0
            fruits[2].tasty     ==  true
          </code>
        </pre>

        <p>Si, perfecte, tenim <code>fruits[2].quantity</code>  bananas.</p>

        <h2>JSON</h2>

        <p>En algun moment del teu estudi de D3, et trobaràs amb la notació d'objectes de JavaScript(JavaScript Object Notation) . Pots <a href="http://en.wikipedia.org/wiki/Json">llegir-ne els detalls aquí</a>, però JSON es bàsicamenet una sintaxi específica per organitzar dades com a objectes de JavaScript. La sintaxi esta optimitzada per fer-se servir amb JavaScript (obviament) i consultes d'AJAX, raó per la qual veuràs moltes APIs basades en la web que escupt dades en format JSON. És més ràpid i fàcil d'analitzar amb JavaScript que XML, i per suposat D3 s'entén bé amb aquest tipus de format.</p>

        <p>Ès això. No sembla gaire diferent del que ja hem vist:</p>

        <pre>
          <code>
            var jsonFruit = {
              "kind": "grape",
              "color": "red",
              "quantity": 12,
              "tasty": true
            };
          </code>
        </pre>

        <p>La única diferència és que els índexs estan escrits entre cometes <code>""</code>, cosa que els converteix en valors de cadena (string).</p>

        <h2>GeoJSON</h2>

        <p>Al igual que amb JSON és només una formalització de la sintaxi d'objectes de JavaScript, GeoJSON és un altre tipus de formalització de la sintaxi d'objectes de JSON, optimitzada per a guardar dades geogràfiques (geodata). Tots els objedtes GeoJSON són objectes JSON , i tots els objectes JSON son objectes de JavaScript.</p>

        <p><a href="http://geojson.org/geojson-spec.html">GeoJSON</a> pot guardar coordenades de punts geogràfiques (normalment longitud i latitud), però també formes (com línies i polígons) i d'altres característiques espaials. Si tens una gran quantitat de geodata, val la pena analitzar-la en format GeoJSON per optimitzar el seu ús per part de D3.</p>

        <p>Entrarem en més detalls del format GeoJSON quan parlem sobre els geomapes, peró de moment, només et cal saber com es veu una senzilla dada GeoJSON:</p>

        <pre>
          <code>
            var geodata = {
                "type": "FeatureCollection",
                "features": [
                    {
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [ 150.1282427, -24.471803 ]
                        },
                        "properties": {
                            "type": "town"
                        }
                    }
                ]
        };
        </code></pre> 

        <p> (Pot ser confús, però la longitud va sempre llistada abans que la latitud. Cal acostumar-se a pensar en termes de lon/lat enlloc de lat/lon.)</p>

        
        
                           
        
        <p class="next_up">Ves al següent capítol: <a href="https://joanprimpratrec2.github.io/fent-diagrama-barres.html">Fent un diagrama de barres </a> &rarr;</p>
        </section>

      	<footer>
      		Aquest tutorial ha sigut traduit per <a href="https://">Joan Prim</a><br>
              Tot el contingut ha sigut desenvolupat i li pertany a <a href="http://alignedleft.com/">Scott Murray</a>
        </footer>


      </div>
    </div>
  </body>
</html>